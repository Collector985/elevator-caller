# Preview Guide - How to View Your LVGL Design

## üé® 3 Ways to Preview Your Work

Before deploying to the CrowPanel hardware, you can preview your UI design in several ways.

---

## **Method 1: LVGL Editor Built-in Preview** ‚≠ê (Easiest)

The LVGL Editor VSCode extension has a built-in preview feature.

### Steps:

1. **Open the LVGL Editor:**
   ```
   Ctrl+Shift+P ‚Üí "LVGL: Open Editor"
   ```

2. **The editor shows live preview:**
   - Left panel: Widget tree
   - **Center panel**: LIVE PREVIEW (480√ó800 canvas)
   - Right panel: Properties

3. **Preview updates automatically** as you:
   - Add widgets
   - Change colors
   - Modify sizes
   - Apply styles

4. **Interactive preview:**
   - Click widgets to select them
   - See visual updates in real-time
   - Test touch areas

### Limitations:
- No event handlers (buttons don't work)
- No dynamic data (static preview only)
- Can't test I2C communication

---

## **Method 2: Build & Run Simulator** (Full Functionality)

Use the Linux simulator in `lv_port_linux/` to test with actual LVGL runtime.

### Steps:

1. **Copy your UI code to simulator:**
   ```bash
   cd /home/collector985/lstore/Documents/PlatformIO/Projects/elevator-caller/crowpanel-display

   # First, export from LVGL Editor:
   # File ‚Üí Export ‚Üí C files

   # Copy to simulator
   cp "lvgl-design/Elevator lvgl project/Elevator_lvgl_project_gen.c" lv_port_linux/src/ui_gen.c
   cp "lvgl-design/Elevator lvgl project/Elevator_lvgl_project_gen.h" lv_port_linux/src/ui_gen.h
   ```

2. **Edit simulator main.c:**
   ```bash
   nano lv_port_linux/src/main.c
   ```

   Replace line 153:
   ```c
   // OLD:
   lv_demo_widgets();

   // NEW:
   #include "ui_gen.h"
   ui_init();  // Or your initialization function
   ```

3. **Build the simulator:**
   ```bash
   cd lv_port_linux
   mkdir -p build && cd build
   cmake ..
   make
   ```

4. **Run the simulator:**
   ```bash
   ./lvglsim -W 480 -H 800
   ```

   Or with SDL backend:
   ```bash
   ./lvglsim -b SDL -W 480 -H 800
   ```

### What you get:
- ‚úÖ Full LVGL rendering
- ‚úÖ Interactive buttons (with event handlers)
- ‚úÖ Real touch/mouse input
- ‚úÖ Animations and transitions
- ‚úÖ Test actual code behavior

### Limitations:
- No I2C communication (mock it with test data)
- No hardware-specific features

---

## **Method 3: Use Existing Preview Build** (Quick Test)

The LVGL Editor already created a preview build in `preview-build/`.

### Steps:

1. **Navigate to preview folder:**
   ```bash
   cd "/home/collector985/lstore/Documents/PlatformIO/Projects/elevator-caller/lvgl-design/Elevator lvgl project/preview-build"
   ```

2. **Check if preview binary exists:**
   ```bash
   ls project/
   ```

3. **Rebuild if needed:**
   ```bash
   make
   ```

4. **Run the preview:**
   ```bash
   ./project/lved-runtime
   ```

### What you get:
- ‚úÖ Quick preview of current design
- ‚úÖ Auto-generated by LVGL Editor
- ‚úÖ Updates when you save changes

### Limitations:
- May not include custom event handlers
- Limited interaction

---

## **Comparison Table**

| Feature | LVGL Editor | Simulator Build | Preview Build |
|---------|-------------|-----------------|---------------|
| **Ease of Use** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Easiest | ‚≠ê‚≠ê‚≠ê Moderate | ‚≠ê‚≠ê‚≠ê‚≠ê Easy |
| **Setup Time** | None | ~5 minutes | ~1 minute |
| **Live Updates** | Yes (instant) | No (rebuild) | Partial |
| **Interactive** | Visual only | Full | Limited |
| **Event Handlers** | No | Yes | Partial |
| **Custom Code** | No | Yes | No |
| **Best For** | Design iteration | Full testing | Quick check |

---

## **Recommended Workflow**

### **Stage 1: Design Phase** (LVGL Editor Preview)
```
1. Open LVGL Editor
2. Design UI visually
3. See instant preview in center panel
4. Adjust colors, sizes, layouts
5. Export when satisfied
```

### **Stage 2: Testing Phase** (Simulator)
```
1. Export C code from LVGL Editor
2. Copy to lv_port_linux/
3. Add event handlers
4. Build and run simulator
5. Test interactions
6. Iterate and refine
```

### **Stage 3: Hardware Deploy**
```
1. Copy final code to crowpanel-display/
2. Merge with I2C communication
3. Build PlatformIO project
4. Upload to CrowPanel
5. Test on actual hardware
```

---

## **Quick Preview Commands**

### **Open LVGL Editor (live preview):**
```bash
# In VSCode
Ctrl+Shift+P ‚Üí "LVGL: Open Editor"
```

### **Build & run simulator:**
```bash
cd lv_port_linux/build
cmake .. && make
./lvglsim -W 480 -H 800
```

### **Rebuild preview:**
```bash
cd "lvgl-design/Elevator lvgl project/preview-build"
make
./project/lved-runtime
```

---

## **Testing Checklist**

Before deploying to hardware, verify in preview:

- [ ] **Layout**: All widgets visible at 480√ó800
- [ ] **Colors**: Matches color palette (purple, blue, green, red, etc.)
- [ ] **Sizes**: Floor cards 58√ó32, buttons 28√ó28
- [ ] **Alignment**: Panel centered, nav bar at bottom
- [ ] **Styles**: Rounded corners (8px), proper padding
- [ ] **Touch targets**: Buttons large enough (28px minimum)
- [ ] **Text**: Labels readable (Montserrat fonts)
- [ ] **Navigation**: Nav buttons styled correctly
- [ ] **Spacing**: Proper gaps between elements

---

## **Troubleshooting**

### **"Can't open LVGL Editor preview"**
- Check if VSCode extension is installed
- Try closing and reopening VSCode
- Check Output panel for errors

### **"Simulator won't build"**
```bash
# Install dependencies
sudo apt-get install cmake build-essential libsdl2-dev
```

### **"Preview shows wrong size"**
- Check `project.xml`: Should be 480√ó800
- Verify window size: `-W 480 -H 800`

### **"Colors look different"**
- Ensure RGB565 color depth
- Check if colors are defined in `globals.xml`

---

## **Next Steps**

After previewing:

1. **If design looks good:**
   - Export to C code
   - Merge with crowpanel-display project
   - Upload to hardware

2. **If design needs changes:**
   - Edit XML files or use LVGL Editor
   - Preview again
   - Iterate until perfect

3. **For full testing:**
   - Use simulator with event handlers
   - Mock I2C data for testing
   - Verify all interactions work

---

**Ready to preview?** Open LVGL Editor now and see your design live!
